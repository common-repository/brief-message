function brief_message_add_post(h){var b=document.getElementById(h+"_form"),i=document.getElementById(h+"_textarea");if(i.value===""){brief_message_pop_up_message(brief_message_common.pop_up_is_blank,"#ff5722");return;}var f=document.getElementById(h+"_wrapper"),k=document.getElementById(h+"_inner"),g=document.getElementById(h+"_post_button"),a=document.getElementById(h+"_post_spin"),c={action:"brief_message_ajax_add_content",nonce:brief_message.nonce,category:g.getAttribute("data-category"),author_name:g.getAttribute("data-author_name"),content:i.value};var j=new XMLHttpRequest();j.onreadystatechange=function(){if(j.readyState===4){var l=JSON.parse(j.response);g.disabled=false;i.disabled=false;g.style.cursor="";i.style.cursor="";a.style.display="none";if(j.status===200&&l.message==="OK"){i.value="";var e=k.getElementsByClassName("bfm_no_content");if(e.length!==0){e[0].parentNode.removeChild(e[0]);}k.insertAdjacentHTML("afterbegin",l.content);brief_message_pop_up_message(brief_message_common.pop_up_completed,"#4caf50");}else{brief_message_pop_up_message(brief_message_common.pop_up_error,"#e91e63");}}else{i.disabled=true;g.disabled=true;i.style.cursor="not-allowed";g.style.cursor="not-allowed";a.style.display="";brief_message_pop_up_message(brief_message_common.pop_up_now_posting,"");}};j.open("POST",brief_message.ajax_url,true);j.setRequestHeader("Content-type","application/x-www-form-urlencoded");j.send(encodeURI(d(c)));function d(m){var e="",l="";if(typeof m==="object"){Object.keys(m).forEach(function(n){e+=l+n+"="+encodeURIComponent(m[n]);l="&";});}return e;}}